<Page
    x:Class="Calendar.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Calendar"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" 
    MinWidth="1000"
    Loaded="Page_Loaded"    
    Unloaded="Page_Unloaded"
    Grid.ColumnSpan="2">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="themes/CalendarDictionary.xaml" x:Name="Main"/>
                <ResourceDictionary>
                    <CollectionViewSource x:Name="WeeksSource" IsSourceGrouped="true" ItemsPath="smallCollection"/>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <Page.BottomAppBar>
        <AppBar x:Name="bottomMenuBar" 
                Padding="2" 
                Background="{StaticResource MainColor}" 
                Height="95" IsSticky="False" 
                BorderThickness="0">

            <Grid>
                <AppBarButton Name="assesBtn" x:Uid="assesBtn" 
                              Click="assesBtn_Click" 
                              Icon="SolidStar" 
                              Margin="120,0,10,0" 
                              Height="90"/>
                <AppBarButton Name="testMeBtn" 
                              Label="TestMe" 
                              Click="testMeBtn_Click" 
                              Icon="Accept" 
                              Margin="10,0" 
                              Height="90"/>
                
                <AppBarButton x:Name="settingAppButton" x:Uid="settingsAppButton"
                              Click="settingAppButton_Click"
                              Width="100" 
                              Margin="0,0,10,0" 
                              VerticalAlignment="Stretch" 
                              HorizontalAlignment="Right" 
                              Icon="Setting"/>
            </Grid>
        </AppBar>
    </Page.BottomAppBar>

    <ScrollViewer HorizontalScrollBarVisibility="Auto" 
                  HorizontalScrollMode="Auto" 
                  VerticalScrollBarVisibility="Hidden">

        <Grid Background="{StaticResource MainColor}" Name="mainBg"  >
            <Grid.RowDefinitions>
                <RowDefinition Height="149*"/>
                <RowDefinition Height="235*"/>
            </Grid.RowDefinitions>

            <StackPanel Name="calBack" 
                  Background="#FF303030" 
                  HorizontalAlignment="Left" 
                  Margin="0" >

                <Grid x:Name="monthTopString" 
                      VerticalAlignment="Top"                       
                      HorizontalAlignment="Stretch" 
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                      Background="Transparent" >
                    <Button x:Name="butPrev" 
                            Click="butPrev_Click" 
                            Height="50"
                            Width="50"
                            HorizontalAlignment="Left" 
                            Margin="20, 0, 10, 0"
                            BorderThickness="0" 
                            VerticalAlignment="Center" >
                        <Button.Background>
                            <ImageBrush Stretch="Fill" ImageSource="Assets/arrow-left.png"/>
                        </Button.Background>
                    </Button>
                    <Button x:Name="monthNameButton" 
                            Width="auto" Height="auto" 
                            HorizontalAlignment="Center" 
                            Margin="10, 0" 
                            Foreground="#FFF0F0F2" 
                            VerticalAlignment="Center" 
                            HorizontalContentAlignment="Center" 
                            VerticalContentAlignment="Center" 
                            BorderThickness="0" 
                            Click="monthNameButton_Click"/>
                    <Button x:Name="butNext" 
                            Click="butNext_Click" 
                            Height="50"
                            Width="50"
                            HorizontalAlignment="Right" 
                            Margin="0, 0, 50, 0"
                            BorderThickness="0" 
                            VerticalAlignment="Center" >
                        <Button.Background>
                            <ImageBrush Stretch="Fill" ImageSource="Assets/arrow-right.png"/>
                        </Button.Background>
                    </Button>
                </Grid>

                <GridView x:Name="weekDayNames" 
                          Margin="0,10,0,0" 
                          HorizontalAlignment="Center" 
                          HorizontalContentAlignment="Center"
                          VerticalContentAlignment="Bottom" 
                          Foreground="#FFF0F0F2" 
                          BorderThickness="0"
                          ManipulationMode="None" 
                          SelectionMode="None" 
                          IsHitTestVisible="False" 
                          IsDoubleTapEnabled="False" 
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <ItemsWrapGrid Orientation="Horizontal"></ItemsWrapGrid>
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>
                    
                    <GridViewItem Style="{StaticResource WeekNameStyle}" x:Uid="Wd1"  />
                    <GridViewItem Style="{StaticResource WeekNameStyle}" x:Uid="Wd2"  />
                    <GridViewItem Style="{StaticResource WeekNameStyle}" x:Uid="Wd3"  />
                    <GridViewItem Style="{StaticResource WeekNameStyle}" x:Uid="Wd4" />
                    <GridViewItem Style="{StaticResource WeekNameStyle}" x:Uid="Wd5"  />
                    <GridViewItem Style="{StaticResource WeekNameStyle}" x:Uid="Wd6" />
                    <GridViewItem Style="{StaticResource WeekNameStyle}" x:Uid="Wd7" />
                </GridView>

                <GridView x:Name="calGrid" 
                          ItemsSource="{Binding Source={StaticResource WeeksSource}}"
                          IsRightTapEnabled="False" 
                          IsDoubleTapEnabled="False" 
                          IsHoldingEnabled="False"
                          ManipulationMode="None" 
                          SelectionMode="None" 
                          HorizontalAlignment="Center" 
                          HorizontalContentAlignment="Center"
                          VerticalAlignment="Top"
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                          Margin="0">

                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <ItemsWrapGrid Orientation="Horizontal"></ItemsWrapGrid>
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>
                    <GridView.ItemTemplate>
                        <DataTemplate>
                            <GridViewItem Tapped="gvItem_Tapped"
                                          Style="{Binding Style}"/>
                        </DataTemplate>
                    </GridView.ItemTemplate>                    
                </GridView>

                <GridView Name="gvDecades" 
                          Visibility="Collapsed" 
                          ItemsSource="{Binding Source={StaticResource WeeksSource}}"
                          IsRightTapEnabled="False" 
                          IsDoubleTapEnabled="False" 
                          IsHoldingEnabled="False"
                          ManipulationMode="None" 
                          SelectionMode="None" 
                          HorizontalAlignment="Center" 
                          HorizontalContentAlignment="Center"
                          VerticalAlignment="Top"
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                          Margin="0">

                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <ItemsWrapGrid Orientation="Horizontal"></ItemsWrapGrid>
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>

                    <GridView.ItemTemplate>
                        <DataTemplate>
                            <GridViewItem Tapped="m1_Tapped"  
                                          Style="{StaticResource DecadeMonthStyle}" 
                                          Foreground="{StaticResource AdditionalColor}"
                                          />
                        </DataTemplate>
                    </GridView.ItemTemplate>

                    <GridView.GroupStyle>
                        <GroupStyle>
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate >
                                    <VariableSizedWrapGrid Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                            <GroupStyle.HeaderTemplate>
                                <DataTemplate>
                                    <Grid Height="0" Width="0" Margin="-5, -10"/>
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                        </GroupStyle>
                    </GridView.GroupStyle>
                </GridView>
                
                <TextBox x:Name="HolidayTitle" x:Uid="HolidayTitle"
                         Background="Transparent" 
                         Foreground="#FFF0F0F2"
                         HorizontalAlignment="Center"
                         BorderThickness="0"
                         IsReadOnly="True"
                         IsHoldingEnabled="False"/>
                <ListView Name="HolidayList" 
                          Width="auto" 
                          HorizontalAlignment="Center" 
                          Margin="0, 10, 0, 0" 
                          BorderThickness="0" 
                          VerticalAlignment="Bottom" 
                          IsItemClickEnabled="True" 
                          ManipulationMode="None" 
                          SelectionMode="None">
                    <ListView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <ItemsWrapGrid Orientation="Horizontal"></ItemsWrapGrid>
                        </ItemsPanelTemplate>
                    </ListView.ItemsPanel>
                    <ListViewItem Name="All" x:Uid="AllHol" Tag="All" 
                                  Style="{StaticResource HolidayFlyoutStyle}" 
                                  Background="{StaticResource MainColor}" 
                                  Foreground="#FFF0F0F2" 
                                  Tapped="holTypes_Tapped" />
                    <ListViewItem Name="M" x:Uid="Mine" Tag="Per" 
                                  Style="{StaticResource HolidayFlyoutStyle}" 
                                  Background="{StaticResource MainColor}" 
                                  Foreground="#FFF0F0F2" 
                                  Tapped="holTypes_Tapped"/>
                    <ListViewItem Style="{StaticResource HolidayFlyoutStyle}" 
                                  Background="{StaticResource MainColor}" 
                                  Foreground="#FFF0F0F2" 
                                  Tapped="holTypes_Tapped"/>
                    <ListViewItem Style="{StaticResource HolidayFlyoutStyle}" 
                                  Background="{StaticResource MainColor}" 
                                  Foreground="#FFF0F0F2" 
                                  Tapped="holTypes_Tapped"/>
                    <ListViewItem Style="{StaticResource HolidayFlyoutStyle}" 
                                  Background="{StaticResource MainColor}" 
                                  Foreground="#FFF0F0F2" 
                                  Tapped="holTypes_Tapped"/>
                    <ListViewItem 
                        Style="{StaticResource HolidayFlyoutStyle}"
                        Background="{StaticResource MainColor}"
                        Foreground="#FFF0F0F2" 
                        Content="..."
                        Tapped="GridViewItem_Tapped" />
                    <FlyoutBase.AttachedFlyout>
                        <Flyout Opened="Flyout_Opened" Closed="butHolidayFlyout_Closed" AutomationProperties.ItemType="CheckBox" x:Name="butHolidayFlyout" Placement="Full" FlyoutPresenterStyle="{StaticResource ResourceKey=HolidayListStyle}">
                            <StackPanel >
                                <TextBlock x:Uid="typesTopString" FontSize="20" FontFamily="Minion Pro" Width="350" Padding="0,0,0,15" Height="auto" TextWrapping="WrapWholeWords" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" MaxLines="2"/>
                                <ListView x:Name="listOfHolidays" Height="400" ManipulationMode="None" SelectionMode="None" VerticalAlignment="Center"/>
                                <ListView Width="380" HorizontalAlignment="Center" Height="auto" Padding="0" ManipulationMode="None" SelectionMode="None" >
                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <ItemsWrapGrid Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>
                                    <Button x:Uid="btnHolidays" x:Name="btnHolidays" 
                                                    Click="btnHolidays_Click" 
                                                    Margin="0,10" 
                                                    HorizontalAlignment="Center" 
                                                    Height="50" Width="160" 
                                                    FontSize="22"
                                                    Style="{StaticResource MainButton}"/>
                                    <Button x:Uid="btnholCancel" x:Name="btnholCancel" 
                                                    Margin="0,10" HorizontalAlignment="Center" 
                                                    Height="50" Width="160" 
                                                    FontSize="22" 
                                                    Click="btnholCancel_Click"
                                                    Style="{StaticResource MainButton}"/>
                                </ListView>
                            </StackPanel>
                        </Flyout>
                    </FlyoutBase.AttachedFlyout>
                </ListView>
            </StackPanel>

            <!--notes-->
            <Grid Name="noteGridMain" 
                  Background="#FFF6F6F9" 
                  HorizontalAlignment="Left">

                <TextBox Name="ClickedDayPage" 
                         VerticalAlignment="Top" 
                         HorizontalAlignment="Center"
                         Foreground="{StaticResource MainColor}" 
                         BorderThickness="0" 
                         FontFamily="Minion Pro" 
                         Background="Transparent" 
                         IsReadOnly="True" 
                         TextAlignment="Center" />
                <ListView Name="noteList" 
                          Foreground="Transparent"
                          Width="auto" Height="auto"
                          HorizontalAlignment="Stretch"
                          ScrollViewer.HorizontalScrollMode="Disabled"
                          ScrollViewer.VerticalScrollMode="Enabled" 
                          ScrollViewer.VerticalScrollBarVisibility="Auto"                          
                          ManipulationMode="None" SelectionMode="None">

                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        </Style>
                    </ListView.ItemContainerStyle>

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <ListViewItem Name="note" 
                                        HorizontalAlignment="Stretch"
                                        Style="{StaticResource NoteStyle}" 
                                        Tag="{Binding HolidayTag}" 
                                        Background="{Binding Background}"
                                        MinHeight="{Binding Height}"
                                        VerticalContentAlignment="Bottom"
                                        Margin="-10, 0, -30, 0"
                                        Tapped="note_Tapped" >
                                <ListViewItem.Content>
                                    <TextBlock                                             
                                            Text="{Binding HolidayName}" 
                                            FontSize="{Binding FontSize}"
                                            Margin="50,20,50,20" 
                                            ManipulationMode="None" 
                                            TextAlignment="Justify"
                                            
                                            TextWrapping="Wrap" />
                                </ListViewItem.Content>
                            </ListViewItem>
                        </DataTemplate>
                    </ListView.ItemTemplate>

                    <FlyoutBase.AttachedFlyout>
                        <Flyout x:Name="AddNoteFlyout" 
                                Opened="AddNoteFlyout_Opened" 
                                Closed="AddNoteFlyout_Closed" 
                                AutomationProperties.ItemType="CheckBox" 
                                Opening="AddNoteFlyout_Opening" 
                                FlyoutPresenterStyle="{StaticResource ResourceKey=NoteFlyoutStyle}" 
                                Placement="Full">

                            <StackPanel x:Name="addNoteSt">
                                <TextBox Name="topString" x:Uid="topString" 
                                     Width="auto" Height="40" 
                                     Background="Transparent" 
                                     BorderThickness="0" 
                                     FontSize="30" 
                                     Margin="10" 
                                     VerticalAlignment="Center" 
                                     HorizontalAlignment="Center" 
                                     FontFamily="Minion Pro" 
                                     IsReadOnly="True"/>

                                <TextBox Name="addNotetb" 
                                     TextWrapping="Wrap" 
                                     Width="400" Height="80" 
                                     Foreground="#ff303030" 
                                     Background="#aadadadb" 
                                     BorderBrush="#ff303030" 
                                     BorderThickness="2" 
                                     FontSize="24" MaxLength="60" />
                                <ListView Name="radioBtParent" Height="50" Padding="0" Margin="10" HorizontalAlignment="Center" ManipulationMode="None" SelectionMode="None" ScrollViewer.IsVerticalRailEnabled="False" >
                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <ItemsWrapGrid Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>
                                    <RadioButton x:Uid="once" IsChecked="True" Tag="none" Width="150"/>
                                    <RadioButton x:Uid="everyYear" Tag="0" Width="150"/>
                                </ListView>
                                <ListView 
                                          Name="delChLists" 
                                          HorizontalAlignment="Center" 
                                          Width="auto" 
                                          ManipulationMode="None" 
                                          SelectionMode="None" >
                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <ItemsWrapGrid Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>

                                    <Button x:Uid="delNote" x:Name="delNote" 
                                        Margin="0" Click="delNote_Click" 
                                        VerticalAlignment="Bottom" 
                                        HorizontalAlignment="Left" 
                                        Style="{StaticResource ExtendMainButton}"/>
                                    <Button x:Uid="changeNote" x:Name="changeNote" 
                                        Margin="0" Click="changeNote_Click" 
                                        VerticalAlignment="Bottom" 
                                        HorizontalAlignment="Right" 
                                        Style="{StaticResource ExtendMainButton}" />
                                </ListView>
                                <ListView HorizontalAlignment="Center" 
                                          Width="auto" 
                                          Name="addRecLists" 
                                          ManipulationMode="None" 
                                          SelectionMode="None" >
                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <ItemsWrapGrid Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>

                                    <Button x:Name="addNote" x:Uid="addNote" 
                                        Click="addNote_Click" 
                                        VerticalAlignment="Bottom" 
                                        HorizontalAlignment="Center" 
                                        Style="{StaticResource ExtendMainButton}"/>
                                    <Button x:Name="reclineButton" x:Uid="reclineButton" 
                                        Click="reclineButton_Click" 
                                        VerticalAlignment="Bottom" 
                                        HorizontalAlignment="Center" 
                                        Style="{StaticResource ExtendMainButton}"/>

                                </ListView>
                            </StackPanel>
                        </Flyout>
                    </FlyoutBase.AttachedFlyout>
                </ListView>


                <ListView Name="GoToDate" 
                          VerticalAlignment="Bottom" 
                          HorizontalContentAlignment="Center" 
                          IsRightTapEnabled="False" 
                          IsSwipeEnabled="False" 
                          HorizontalAlignment="Center" 
                          Height="auto" Width="auto" 
                          Margin="100,0,0,20" 
                          Grid.Row="1" >
                    <ListView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <ItemsWrapGrid Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ListView.ItemsPanel>
                    <DatePicker Name="DatePickerDp" 
                                HorizontalAlignment="Left" 
                                Height="35" Width="auto"
                                Margin="0,5" 
                                VerticalAlignment="Center" 
                                RequestedTheme="Light" 
                                DayVisible="False" MonthFormat="{}{month.solo.full}"/>
                    <Button Name="GoToDateBtn" x:Uid="GoToDateBtn" 
                            Tag="licensed" 
                            FontSize="16" 
                            Height="40" Width="110" 
                            Margin="5,2" 
                            HorizontalAlignment="Left" 
                            Click="GoToDateBtn_Click"
                            Style="{StaticResource MainButton}"
                            Background="{StaticResource MainColor}"
                            />

                </ListView>

            </Grid>
        </Grid>
    </ScrollViewer>
</Page>
